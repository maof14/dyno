@page "/dyno"
@using Fluxor.Blazor.Web.Components
@using MudBlazor
@using ViewModels
@inherits FluxorComponent

<PageTitle>Dyno</PageTitle>

<h1>Measurement result list</h1>

<p>This list displays all available measurements. Click one to view details.</p>

<MudButton OnClick="TestConnection">Test connection</MudButton>
<MudButton OnClick="InitializeNewMeasurement">Start new measurement</MudButton>

<MudTable T="MeasurementModel" Items="@Measurements" Hover="true" Loading="@MeasurementState.Value.IsLoading" OnRowClick="HandleRowClick">
    <HeaderContent>
        <MudTh>
            Name
        </MudTh>
        <MudTh>
            Datapoints
        </MudTh>
        <MudTh>
            Date recorded
        </MudTh>
    </HeaderContent>
    <RowTemplate>
        <MudTd DataLabel="Name">@context.Name</MudTd>
        <MudTd DataLabel="Datapoints count">@context.MeasurementResults.Count</MudTd>
        <MudTd DataLabel="Date">@context.DateTime</MudTd>
    </RowTemplate>
</MudTable>


